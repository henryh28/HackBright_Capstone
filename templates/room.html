{% extends 'base.html' %}

{% block title %} {{ room.description }} {% endblock %}


{% block body %}

<h2>Room: {{ room.description }}</h2>

<div class="flex_container event_room">

    <!-- Vertical flex box for choice search results -->
    <div class = "vertical_flex col">
        <div class = "add_choices col-md-4">
            <form method="POST">
    
                <label for="choice_type" id="choice_type">Title: </label> 
                <select name="choice_type">
                    <option value="boardgame">Boardgame</option>
                    <option value="vgame">Video Game</option>
                    <option value="movie">Movie</option>
                    <option value="tv">TV</option>
                </select>
    
                <input type="hidden" name="event_id" value={{ room.event_id }} />
                <input type="hidden" name="room_code" value={{ room.room_code }} />
                <input type="hidden" name="create_choice" value=0 />

                <div class="form-group">
                    <label for="choice_title">Search: </label>
                    <input type="text" name="choice_title"><br>
                </div>

                <input type="submit" formaction = "/add_choice" value="Search">
            </form>
        </div>    


        <!-- Create visual representation of matching search results -->
        <div class = "search_result_container">
            {% for record in search_results %}
                <form method="POST">
                    <div class = "search_result_item">
                        <button type="submit" formaction = "/add_choice" name="choice_title" value="{{ record.title }}"> {{ record.title }} </button>
                        <input type="hidden" name="choice_type" value={{ choice_type }} />
                        <input type="hidden" name="event_id" value={{ room.event_id }} />
                        <input type="hidden" name="room_code" value={{ room.room_code }} />
                        <input type="hidden" name="create_choice" value=1 />
                    </div>
                </form>
            {% endfor %}
        </div>
    </div>


    <!-- Begin center flexbox to list current choices -->
    <div class = "room_choices col-md-4" ondragover="onDragOver(event);" ondrop="onDrop(event);">
        <h3>The nominees</h3>

        {% for choice in room.choices %}
        <form method="POST">
            <div class = "room_choice_items">
                <button type="submit" formaction = "/remove_choice" name="choice_id" value="{{ choice.choice_id }}"> Remove </button>
                <input type="hidden" name="room_code" value={{ room.room_code }} />
                <a href="/details/{{ choice.choice_id }}">{{ choice.title }}</a><br>
            </div>
        </form>
        {% endfor %}
    </div>

    <div class = "room_participants col-md-3">
        All Participants:
    </div>
</div>



{% endblock %}







